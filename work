# No longer needed was from networking
# plan-service proxy variable
# export PLAN_SERVICE_PROXY=1

# ARTIFACTORY TWINE CA
export TWINE_CERT=/etc/ssl/certs/LGL-root-CA.pem

# OpenSC Yubikey
case "$(uname)" in
  Darwin)
    export OPENSC=/usr/local/lib/opensc-pkcs11.so
    ;;
  Linux)
    # os-release should be installed on all systemd systems
    if [ -e /etc/os-release ]; then
      _name=$(egrep "^NAME=" /etc/os-release | cut -d "=" -f2)
      case $_name in
        Fedora)
            export OPENSC=/usr/lib64/opensc-pkcs11.so
            ;;
        Ubuntu)
            export OPENSC=/usr/lib/x86_64-linux-gnu/opensc-pkcs11.so
            ;;
      esac
    fi
    ;;
esac


# User OCIDS
export R1_OCID=ocid1.user.region1..aaaaaaaaur6gkncfk7bluazse56dcspgafoad3ftpkts2b7fibxh7dtaw47q
export OC1_OCID=ocid1.user.oc1..aaaaaaaaigtwcqjhdgggolztbsrimhtf5iewpj6clqj74xpagghz7lhzlsua
export OC2_OCID=ocid1.user.oc2..aaaaaaaa52mdan4sa4pobx34522xg74p7uiz32hc3u3klszdca4tkm73xymq

# work dir
export WORK=$HOME/Projects/work
alias work="cd $WORK"

## pic-tools
if [ -d "$WORK/pic-tools/scripts" ]; then
  source $WORK/pic-tools/scripts/*.env
fi

# No longer needed was in networking
# autonet
# alias autonet="cd $WORK/autonet"
#
# Kill McAfee
alias kill_mcafee='sudo /usr/local/McAfee/AntiMalware/VSControl stop; sudo /usr/local/McAfee/AntiMalware/VSControl stopoas'
alias unkill_mcafee='sudo /usr/local/McAfee/AntiMalware/VSControl start; sudo /usr/local/McAfee/AntiMalware/VSControl startoas'

# CD to pki git repo
alias pki-infra='cd $GOPATH/src/bitbucket.oci.oraclecorp.com/secinf/pki-infra'
alias pki-ops='cd $WORK/pki-ops'
export GOPRIVATE=bitbucket.oci.oraclecorp.com

# CD to work go
alias mygo='cd $GOPATH/src/bitbucket.oci.oraclecorp.com/~ajwarren'

# openconnect
alias disconnect='sudo -E killall -SIGINT openconnect'
alias workvpn='sudo openconnect -b -u andrew.j.warren --csd-wrapper=/home/ajwarren/Downloads/hostscan-bypass.sh se3-p-sec-vpn-01.oracle-ocna.com --os=mac-intel'

ssh-cavium () {
	if [ $# -lt 2 ]; then
		echo "Usage: ssh-cavium region ip"
		return
	fi
	ssh -o StrictHostKeyChecking=no -q -vvv -o ProxyCommand="ssh -W %h:%p bastion-ad1.rb.${1}.oci.oracleiaas.com" "$2"
}
ssh-cavium-gov() {
	if [ $# -lt 2 ]; then
		echo "Usage: ssh-cavium region ip"
		return
	fi
	ssh -o StrictHostKeyChecking=no -q -o  ProxyCommand="ssh -W %h:%p bastion-ad1.$1.oraclegoviaas.com" "$2"
}
ssh-cavium-gov-uk() {
	if [ $# -lt 2 ]; then
		echo "Usage: ssh-cavium region ip"
		return
	fi
	ssh -o StrictHostKeyChecking=no -q -o  ProxyCommand="ssh -W %h:%p bastion-ad1.rb.$1.oraclegoviaas.uk" "$2"
}

alias barndoor-oc7='ssh -vtD 1081 barndoor7.ob.us-phoenix-1.oci.oraclecloud.com watch -n 90 date'
alias barndoor-oc6='ssh -vtD 1080 barndoor6.ob.us-phoenix-1.oci.oraclecloud.com watch -n 90 date'

kubeconfig () {
    if [ -z "$1" ]
    then
        echo "Regional argument not supplied. Must be one of dev-iad, dev-phx, integ-iad, prd-iad, prd-phx, prd-fra, prd-lhr, prd-yyz"
        return 1
    fi
    export KUBECONFIG=$GOPATH/src/bitbucket.oci.oraclecorp.com/okei/secrets/k8-infra/${1}/kubeconfig.TNL
}

tunnel () {
    if [ -z "$1" ]
    then
        echo "Regional argument not supplied. Must be one of dev-iad, dev-phx, integ-iad, prd-iad, prd-phx, prd-fra, prd-lhr, prd-yyz"
        return 1
    fi
    KUBECONFIG=$GOPATH/src/bitbucket.oci.oraclecorp.com/okei/secrets/k8-infra/${1}/kubeconfig.TNL $GOPATH/src/bitbucket.oci.oraclecorp.com/okei/secrets/bin/tunnel.sh
}

export BASE_AGENT_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-base-agent
export CANARY_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-canary
export CONFIG_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/okei/config
export INFRA_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/infra
export INFRA_AGENT_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-agent
export INFRA_BUNDLE_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-bundle
export INFRA_CONFIG_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-config
export INFRA_CORESVCS_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-coresvcs
export INFRA_DEPLOY_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-deploy
export INFRA_INSTANCE_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-instance
export INFRA_LOCAL_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-local
export INFRA_PRIME_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/infra-prime
export INFRA_REGION_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/oke/oke-infra-region
export OKE_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/odx/oke
export SECRETS_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/okei/secrets
export SECRETS_GOV_REPO=$GOPATH/src/bitbucket.oci.oraclecorp.com/okei/secrets_usgov

docker_cleanup () {
  docker ps -aqf status=exited | xargs -I{} docker rm {}
  docker images -q -f dangling=true | xargs -I{} docker rmi {}
}

docker_prune () {
  docker image prune -a -f
}

docker_start () {
  open --background -a Docker
}

docker_stop () {
  osascript -e 'quit app "Docker"'
}

alias ia="\$INFRA_LOCAL_REPO/ia.sh"
alias ia_core="MOUNT_INFRA_CORESVCS=1 \$INFRA_LOCAL_REPO/ia.sh"
alias ia_dev="MOUNT_INFRA=1 MOUNT_OCI=1 NO_BUILD=\${NO_BUILD:-0} \$INFRA_LOCAL_REPO/ia.sh"
alias ia_gov="CONFIG_REPO=\$SECRETS_GOV_REPO SECRETS_REPO=\$SECRETS_GOV_REPO \$INFRA_LOCAL_REPO/ia.sh"
alias ia_update="\$INFRA_LOCAL_REPO/ia.sh update"
